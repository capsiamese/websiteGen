---
title: "合成波"
date: 2023-04-01T09:57:06+08:00
draft: true
tags: []
---

通过正确的方式使用matplotlib来创建一个复古合成波视觉动画.

一个奇妙且独特的音乐流派, 合成波的灵感来自1980年代的怀旧之情, 是技术人员的共同热爱.
我发现它所搭配的艺术风格令人着迷.

在youtube上快速搜索[该类型](https://www.youtube.com/watch?v=wOMwO5T3yT4&ab_channel=Asthenic)可以让任何人欣赏该类型带来的复古科幻美学.

现在我更想创建一个像这样的视觉特效, 然而我日复一日的处理这些数据,但我并不是动画师, 平面设计师或者艺术家.

然后我想, 我确实创建了视觉效果, 我在matplotlib中可视化数据, 在matplotlib中创建合成波视觉效果是不是更有趣?

## Prespective(透视)

第一件要做的事是创建一个**垂直网格线的透视**, 我们设置一个原点在(0, 5), 线条必须从这里到达视口的底部`y = -50`.
唯一变化的值是每条线最终的x值, 这个值的范围在[-500, 500]之间, 每个值间隔50.
[](synthwave_coord.webp)

现在, 这里还没有地平线, 没有它就不没有无尽的合成波路径, 因此我们简单的将`y > 0`的部分遮住即可.

最终, 我们选择一个颜色, 我们将使用黑色背景并使用多条半透明的线来创建发光效果.
[]()

## Motion(动效)

这将有一点tricky, 为了创建朝向我们运动的水平的线, 我们使用matplotlib动画来持续的更新y方向的水平线.
我们创建十个动效线实例, 每个都分配一个修改后的指数函数.

[]() []() []()

Y-position函数分别对于0, 4, 8行.

每条会动的线都会被相同的x值对每一帧, 但是我们沿着x轴移动了每个函数, 我们返回一个不同的y值, 如果我们策划所有10条会动的线, 顺着这个
逻辑, 我们可以通过时间(x轴), 可视的线(y轴)

[]()

为了使用一个幂函数, 我们混合线条并透视其中一条线, 三维运动的错觉是通过随着运动线靠近我们而**增加向下的速度**产生的, 这类似动画中的缓动.

将其应用到我们的水平网格的y位置, 我们产生在霓虹紫色电子世界中不断前进的所决.

[]()

幸运的是, 对于我们的输入文件大小, 我们的运动线每占总时间的十分之一重复一次, 这意味着我们可以在动画函数中将动画帧减少10个.
`animation.FuncAnimation(fig, animate, frames=int(frames/10))`

## Miami Sun(迈阿密太阳)

在我们无尽的霓虹紫色之路尽头, 如果没有超大的复古日落, 就不会是合成波.

在梯度方面, matplotlib可能有点困难, 我们使用`imshow()`创建一个图像, 在我们的例子中是渐变的`plasma`, 然后, 我们将此图屏蔽到中心点半径
之外从而的到

[]()

很好, 但还不够, 迈阿密的太阳需要光芒和几条水平线, 对于辉光, 我们放置了几个半径稍微大点的alpha值较低的圆圈, 使用简单的黑色线图后添加线条.

[]()

将我们的迈阿密太阳和霓虹灯网格放在一起

[]()

## Destination

无尽的霓虹紫色道路需要目的地, 一个遥远但是不太遥远的, 想想一个个神秘的都市天堂.

幸运的是 Matplotlib带有一个名为`plt.bar()`, 我们简单的使用`np.random.uniform(0, 10)`通过一些计算来定义条形宽度, 我们就有了自己美丽的.
随机生成的天际线.

[]()

由于我们无法在万里无云的迈阿密夜空中看到我们的天际线轮廓, 因此我们添加了无尽的地平线发出的深紫色光芒, 我们用`plt.imshow`, 我们初始`gnuplot`渐变
所以让我们使用前28中颜色并创建一个新的渐变`ListedColormap`

[]()

我还冒昧地减少了我们的霓虹灯网格线宽，我认为现在看起来好多了。让我们看看我们无尽的道路是怎样的：

看起来不错，但现在我们超大的迈阿密日落可能太大了，挤压了我们对远处天际线的完美视野。此外，80 年代的迈阿密天空总是布满星星，而我却一个也看不见。

plt.scatter()因此，让我们调整太阳的大小并使用np.random.uniform()forx和添加星星y。我们还alpha根据 y 位置（向地平线变暗）和一点点随机性的组合来改变每颗星的参数。

## Finishing Touches 收尾工作

现在有一些我认为可以完成可视化的小调整。

首先，星星出现在太阳前面。我们只需调整zorder星形ax.scatter()函数中的参数即可。将它们移动到太阳下方——作为补丁默认为zorder = 1[3]。

在这一点上，它看起来不错，但星星只是普通的白点，不是很有说服力。所以我们添加了一些随机生成的闪烁。

最后，与我们地平线天际线后面散发出的光芒非常相似。我们添加另一个紫黑色渐变。这次沿着我们无尽的道路。

就是这样，Matplotlib 中的 Synthwave！

## Reference

[Creating Synthwave With Matplotlib](https://towardsdatascience.com/creating-synthwave-with-matplotlib-ea7c9be59760)